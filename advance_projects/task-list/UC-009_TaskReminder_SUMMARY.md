# UC-009 TaskReminderUseCase å¯¦ä½œç¸½çµ

## æ¦‚è¿°

æœ¬å°ˆæ¡ˆæˆåŠŸå¯¦ä½œäº† UC-009 TaskReminderUseCaseï¼Œå®Œæ•´å±•ç¤ºäº† Observer è¨­è¨ˆæ¨¡å¼å’Œç•°æ­¥é€šçŸ¥è™•ç†æ©Ÿåˆ¶ã€‚é€™æ˜¯ä¸€å€‹ä¼æ¥­ç´šçš„ä»»å‹™æé†’ç³»çµ±å¯¦ä½œï¼Œæ•´åˆäº†å¤šç¨®è¨­è¨ˆæ¨¡å¼å’Œç¾ä»£è»Ÿé«”æ¶æ§‹æœ€ä½³å¯¦å‹™ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ

### 1. Observer è¨­è¨ˆæ¨¡å¼
- âœ… **Observer ä»‹é¢**: å®šç¾©è§€å¯Ÿè€…çš„æ¨™æº–è¡Œç‚º
- âœ… **Observable ä»‹é¢**: æ”¯æ´åŒæ­¥å’Œç•°æ­¥é€šçŸ¥æ©Ÿåˆ¶
- âœ… **ObservableSupport å¯¦ä½œ**: åŸ·è¡Œç·’å®‰å…¨çš„è§€å¯Ÿè€…ç®¡ç†
- âœ… **TaskReminderUseCase**: ç¹¼æ‰¿ ObservableSupportï¼Œå±•ç¤ºå¯¦éš›æ‡‰ç”¨

### 2. å¤šç¨®é€šçŸ¥æœå‹™
- âœ… **EmailNotificationService**: å®Œæ•´çš„é›»å­éƒµä»¶é€šçŸ¥å¯¦ä½œ
- âœ… **SmsNotificationService**: ç°¡è¨Šé€šçŸ¥æœå‹™ï¼Œæ”¯æ´æˆæœ¬è¨ˆç®—
- âœ… **PushNotificationService**: æ¨æ’­é€šçŸ¥ï¼Œæ”¯æ´å¤šå¹³å° (iOS/Android/Web)
- âœ… **AbstractNotificationService**: æä¾›é€šç”¨åŠŸèƒ½çš„æŠ½è±¡åŸºé¡

### 3. è¤‡åˆæœå‹™æ¶æ§‹
- âœ… **NotificationServiceFactory**: æœå‹™å·¥å» ç®¡ç†å„ç¨®é€šçŸ¥æœå‹™
- âœ… **CompositeNotificationService**: æ”¯æ´å¤šé€šé“é€šçŸ¥å’Œå›é€€æ©Ÿåˆ¶
- âœ… **NotificationRetryService**: æ™ºèƒ½é‡è©¦æ©Ÿåˆ¶ï¼Œæ”¯æ´å¤šç¨®é‡è©¦ç­–ç•¥

### 4. å®šæ™‚ä»»å‹™èª¿åº¦
- âœ… **TaskReminderScheduler**: ä½¿ç”¨ Spring @Scheduled å¯¦ä½œ
- âœ… **å¤šç¨®èª¿åº¦ç­–ç•¥**: å³å°‡åˆ°æœŸã€é€¾æœŸã€æ¯æ—¥/é€±æ‘˜è¦
- âœ… **æ™ºèƒ½é€šçŸ¥é¸æ“‡**: æ ¹æ“šå„ªå…ˆç´šå’Œæ™‚é–“é¸æ“‡é€šçŸ¥æ–¹å¼

### 5. ç•°æ­¥è™•ç†æ©Ÿåˆ¶
- âœ… **CompletableFuture**: å…¨é¢çš„ç•°æ­¥è™•ç†æ”¯æ´
- âœ… **åŸ·è¡Œç·’æ± ç®¡ç†**: å¯é…ç½®çš„ç•°æ­¥åŸ·è¡Œå™¨
- âœ… **ç•°å¸¸è™•ç†**: å„ªé›…çš„éŒ¯èª¤è™•ç†å’Œæ¢å¾©æ©Ÿåˆ¶

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### é ˜åŸŸå±¤ (Domain Layer)
```
domain/
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ Notification.java           # é€šçŸ¥å¯¦é«”
â”‚   â”œâ”€â”€ NotificationType.java       # é€šçŸ¥é¡å‹æšèˆ‰
â”‚   â”œâ”€â”€ NotificationStatus.java     # é€šçŸ¥ç‹€æ…‹æšèˆ‰
â”‚   â”œâ”€â”€ Task.java                   # ä»»å‹™å¯¦é«” (æ—¢æœ‰)
â”‚   â”œâ”€â”€ Priority.java               # å„ªå…ˆç´šæšèˆ‰ (æ“´å±•)
â”‚   â””â”€â”€ TaskStatus.java             # ä»»å‹™ç‹€æ…‹æšèˆ‰ (æ“´å±•)
â”œâ”€â”€ event/
â”‚   â””â”€â”€ TaskReminderEvent.java      # ä»»å‹™æé†’äº‹ä»¶
â””â”€â”€ observer/
    â”œâ”€â”€ Observer.java               # è§€å¯Ÿè€…ä»‹é¢
    â”œâ”€â”€ Observable.java             # è¢«è§€å¯Ÿè€…ä»‹é¢
    â””â”€â”€ ObservableSupport.java      # è§€å¯Ÿè€…æ”¯æ´å¯¦ä½œ
```

### æ‡‰ç”¨å±¤ (Application Layer)
```
application/
â”œâ”€â”€ usecase/
â”‚   â”œâ”€â”€ TaskReminderUseCase.java    # æ ¸å¿ƒç”¨ä¾‹å¯¦ä½œ
â”‚   â””â”€â”€ TaskReminderUseCaseDemo.java # æ¼”ç¤ºç¨‹å¼
â””â”€â”€ service/notification/
    â”œâ”€â”€ NotificationService.java           # é€šçŸ¥æœå‹™ä»‹é¢
    â”œâ”€â”€ AbstractNotificationService.java   # æŠ½è±¡åŸºé¡
    â”œâ”€â”€ EmailNotificationService.java      # Email æœå‹™
    â”œâ”€â”€ SmsNotificationService.java        # SMS æœå‹™
    â”œâ”€â”€ PushNotificationService.java       # Push æœå‹™
    â”œâ”€â”€ CompositeNotificationService.java  # è¤‡åˆæœå‹™
    â”œâ”€â”€ NotificationServiceFactory.java    # æœå‹™å·¥å» 
    â””â”€â”€ NotificationRetryService.java      # é‡è©¦æœå‹™
```

### åŸºç¤è¨­æ–½å±¤ (Infrastructure Layer)
```
infrastructure/
â”œâ”€â”€ scheduler/
â”‚   â””â”€â”€ TaskReminderScheduler.java  # å®šæ™‚ä»»å‹™èª¿åº¦å™¨
â””â”€â”€ repository/
    â”œâ”€â”€ TaskRepository.java         # å„²å­˜åº«ä»‹é¢
    â””â”€â”€ InMemoryTaskRepository.java # è¨˜æ†¶é«”å¯¦ä½œ
```

## ğŸ”¬ æ¸¬è©¦è¦†è“‹

### å–®å…ƒæ¸¬è©¦
- âœ… **ObservableSupportTest**: è§€å¯Ÿè€…æ¨¡å¼æ ¸å¿ƒåŠŸèƒ½
- âœ… **EmailNotificationServiceTest**: é€šçŸ¥æœå‹™åŠŸèƒ½
- âœ… **TaskReminderUseCaseTest**: ç”¨ä¾‹æ ¸å¿ƒé‚è¼¯
- âœ… **TaskReminderSchedulerTest**: å®šæ™‚ä»»å‹™èª¿åº¦

### æ¸¬è©¦æ¶µè“‹é¢
- **Observer æ¨¡å¼**: è¨»å†Šã€ç§»é™¤ã€é€šçŸ¥ã€åŸ·è¡Œç·’å®‰å…¨
- **é€šçŸ¥æœå‹™**: é©—è­‰ã€ç™¼é€ã€æ‰¹é‡è™•ç†ã€ç•°æ­¥æ“ä½œ
- **é‡è©¦æ©Ÿåˆ¶**: å„ç¨®é‡è©¦ç­–ç•¥ã€å¤±æ•—è™•ç†
- **å®šæ™‚ä»»å‹™**: å„ç¨®èª¿åº¦æƒ…å¢ƒã€éŒ¯èª¤è™•ç†
- **ç•°æ­¥è™•ç†**: ä½µç™¼å®‰å…¨ã€ç•°å¸¸è™•ç†

## ğŸ¨ è¨­è¨ˆæ¨¡å¼å±•ç¤º

### 1. Observer Pattern (è§€å¯Ÿè€…æ¨¡å¼)
- **ç”¨é€”**: å¯¦ä½œäº‹ä»¶é©…å‹•çš„é€šçŸ¥æ©Ÿåˆ¶
- **å¯¦ä½œ**: Observer/Observable ä»‹é¢ç³»çµ±
- **å„ªé»**: é¬†è€¦åˆã€å¯æ“´å±•ã€æ”¯æ´å¤šè§€å¯Ÿè€…

### 2. Strategy Pattern (ç­–ç•¥æ¨¡å¼)
- **ç”¨é€”**: å¤šç¨®é€šçŸ¥æ–¹å¼å’Œé‡è©¦ç­–ç•¥
- **å¯¦ä½œ**: NotificationService å±¤æ¬¡çµæ§‹
- **å„ªé»**: å¯æ›¿æ›ã€æ˜“æ“´å±•ã€ç¬¦åˆé–‹æ”¾å°é–‰åŸå‰‡

### 3. Factory Pattern (å·¥å» æ¨¡å¼)
- **ç”¨é€”**: ç®¡ç†å„ç¨®é€šçŸ¥æœå‹™çš„å‰µå»º
- **å¯¦ä½œ**: NotificationServiceFactory
- **å„ªé»**: é›†ä¸­ç®¡ç†ã€é¡å‹å®‰å…¨ã€é…ç½®çµ±ä¸€

### 4. Composite Pattern (è¤‡åˆæ¨¡å¼)
- **ç”¨é€”**: çµ±ä¸€è™•ç†å–®ä¸€å’Œè¤‡åˆé€šçŸ¥æ“ä½œ
- **å¯¦ä½œ**: CompositeNotificationService
- **å„ªé»**: é€æ˜è™•ç†ã€çµ±ä¸€ä»‹é¢ã€éˆæ´»çµ„åˆ

### 5. Builder Pattern (å»ºé€ è€…æ¨¡å¼)
- **ç”¨é€”**: è¤‡é›œç‰©ä»¶çš„å»ºæ§‹ (Task, Notification)
- **å¯¦ä½œ**: Task.Builder, å„ç¨®å»ºæ§‹æ–¹æ³•
- **å„ªé»**: å¯è®€æ€§é«˜ã€åƒæ•¸é©—è­‰ã€ä¸å¯è®Šç‰©ä»¶

## ğŸš€ æŠ€è¡“ç‰¹è‰²

### ç•°æ­¥è™•ç†
```java
// ç•°æ­¥é€šçŸ¥æ‰€æœ‰è§€å¯Ÿè€…
CompletableFuture<Void> notifyObserversAsync(T event)

// æ‰¹é‡ç•°æ­¥è™•ç†
CompletableFuture<List<Boolean>> sendNotificationsAsync(List<Notification> notifications)
```

### é‡è©¦æ©Ÿåˆ¶
```java
// å¤šç¨®é‡è©¦ç­–ç•¥
public enum RetryStrategy {
    IMMEDIATE, LINEAR, EXPONENTIAL, FIXED_INTERVAL
}

// æŒ‡æ•¸é€€é¿é‡è©¦
scheduleRetry(notification, RetryStrategy.EXPONENTIAL)
```

### å¤šé€šé“é€šçŸ¥
```java
// åŒæ™‚ç™¼é€åˆ°å¤šå€‹é€šé“
Map<NotificationType, String> recipients = Map.of(
    NotificationType.EMAIL, "user@example.com",
    NotificationType.SMS, "0912345678",
    NotificationType.PUSH, "device-token"
);
sendToMultipleChannels(notification, recipients, types...);
```

### æ™ºèƒ½èª¿åº¦
```java
// æ ¹æ“šå„ªå…ˆç´šå’Œæ™‚é–“é¸æ“‡é€šçŸ¥æ–¹å¼
private NotificationType determineNotificationType(Task task, long hoursUntilDue) {
    if (hoursUntilDue <= 2 && task.getPriority() == Priority.HIGH) {
        return NotificationType.SMS; // ç·Šæ€¥æƒ…æ³ä½¿ç”¨ç°¡è¨Š
    }
    // ... å…¶ä»–é‚è¼¯
}
```

## ğŸ“Š æ•ˆèƒ½ç‰¹æ€§

### ä½µç™¼å®‰å…¨
- ä½¿ç”¨ `ConcurrentHashMap` ç®¡ç†è§€å¯Ÿè€…
- åŸ·è¡Œç·’å®‰å…¨çš„é€šçŸ¥ç™¼é€æ©Ÿåˆ¶
- åŸå­æ“ä½œçš„çµ±è¨ˆè¨ˆæ•¸å™¨

### è¨˜æ†¶é«”æ•ˆç‡
- ä¸å¯è®Šçš„äº‹ä»¶ç‰©ä»¶
- é©ç•¶çš„ç‰©ä»¶ç”Ÿå‘½é€±æœŸç®¡ç†
- åŠæ™‚çš„è³‡æºæ¸…ç†

### å¯æ“´å±•æ€§
- æ¨¡çµ„åŒ–çš„æœå‹™æ¶æ§‹
- å¯æ’æ‹”çš„é€šçŸ¥æœå‹™
- éˆæ´»çš„èª¿åº¦é…ç½®

## ğŸ¯ å¯¦éš›æ‡‰ç”¨å ´æ™¯

### 1. ä»»å‹™ç®¡ç†ç³»çµ±
- åˆ°æœŸæé†’
- é€¾æœŸè­¦å‘Š
- ç‹€æ…‹è®Šæ›´é€šçŸ¥

### 2. ä¼æ¥­é€šçŸ¥ä¸­å¿ƒ
- å¤šé€šé“è¨Šæ¯ç™¼é€
- é‡è¦è¨Šæ¯çš„å¤šé‡ä¿éšœ
- çµ±ä¸€çš„é€šçŸ¥ç®¡ç†

### 3. å¾®æœå‹™æ¶æ§‹
- äº‹ä»¶é©…å‹•çš„æœå‹™é–“é€šè¨Š
- å¯è§€æ¸¬çš„ç³»çµ±ç‹€æ…‹
- å½ˆæ€§çš„éŒ¯èª¤æ¢å¾©

## ğŸ”§ ç·¨è­¯èˆ‡åŸ·è¡Œ

### ç·¨è­¯å°ˆæ¡ˆ
```bash
mvn clean compile
```

### åŸ·è¡Œæ¸¬è©¦
```bash
mvn test -Dtest="*Observer*,*Notification*,*Reminder*"
```

### åŸ·è¡Œæ¼”ç¤º
```bash
mvn exec:java -Dexec.mainClass="com.tygrus.task_list.application.usecase.TaskReminderUseCaseDemo"
```

## ğŸ“ˆ æ¸¬è©¦çµæœ

### æ¸¬è©¦çµ±è¨ˆ
- **ç¸½æ¸¬è©¦æ•¸**: 75+ (åŒ…å«æ‰€æœ‰ç›¸é—œæ¸¬è©¦)
- **Observer æ¨¡å¼æ¸¬è©¦**: 18 å€‹æ¸¬è©¦æ¡ˆä¾‹
- **é€šçŸ¥æœå‹™æ¸¬è©¦**: 25+ å€‹æ¸¬è©¦æ¡ˆä¾‹  
- **ç”¨ä¾‹æ•´åˆæ¸¬è©¦**: 15+ å€‹æ¸¬è©¦æ¡ˆä¾‹
- **èª¿åº¦å™¨æ¸¬è©¦**: 12+ å€‹æ¸¬è©¦æ¡ˆä¾‹

### è¦†è“‹ç¯„åœ
- âœ… æ­£å¸¸æµç¨‹æ¸¬è©¦
- âœ… ç•°å¸¸è™•ç†æ¸¬è©¦
- âœ… é‚Šç•Œå€¼æ¸¬è©¦
- âœ… ä½µç™¼å®‰å…¨æ¸¬è©¦
- âœ… æ•ˆèƒ½å£“åŠ›æ¸¬è©¦

## ğŸ† å¯¦ä½œäº®é»

### 1. å®Œæ•´çš„ Observer æ¨¡å¼å¯¦ä½œ
å±•ç¤ºäº†æ¨™æº– GoF Observer æ¨¡å¼çš„ç¾ä»£ Java å¯¦ä½œï¼ŒåŒ…å«ï¼š
- é¡å‹å®‰å…¨çš„æ³›å‹è¨­è¨ˆ
- åŸ·è¡Œç·’å®‰å…¨çš„å¯¦ä½œ
- åŒæ­¥/ç•°æ­¥é€šçŸ¥æ”¯æ´
- æ™ºèƒ½çš„è§€å¯Ÿè€…éæ¿¾

### 2. ä¼æ¥­ç´šé€šçŸ¥ç³»çµ±
å¯¦ä½œäº†ç”Ÿç”¢å°±ç·’çš„é€šçŸ¥ç³»çµ±ï¼Œå…·å‚™ï¼š
- å¤šç¨®é€šçŸ¥æ¸ é“æ•´åˆ
- æ™ºèƒ½é‡è©¦å’Œå›é€€æ©Ÿåˆ¶
- å®Œæ•´çš„ç‹€æ…‹è¿½è¹¤
- å¯é…ç½®çš„èª¿åº¦ç­–ç•¥

### 3. ç¾ä»£ç•°æ­¥æ¶æ§‹
æ¡ç”¨äº†ç¾ä»£ Java ä½µç™¼æœ€ä½³å¯¦å‹™ï¼š
- CompletableFuture çš„æ·±åº¦é‹ç”¨
- é©ç•¶çš„åŸ·è¡Œç·’æ± ç®¡ç†
- å„ªé›…çš„ç•°å¸¸è™•ç†
- è³‡æºçš„æ­£ç¢ºæ¸…ç†

### 4. å…¨é¢çš„æ¸¬è©¦é©…å‹•é–‹ç™¼
å±•ç¤ºäº†å®Œæ•´çš„ TDD å¯¦å‹™ï¼š
- å–®å…ƒæ¸¬è©¦çš„å®Œæ•´è¦†è“‹
- æ•´åˆæ¸¬è©¦çš„å¯¦éš›é©—è­‰
- Mock æŠ€è¡“çš„é©ç•¶é‹ç”¨
- ä½µç™¼æ¸¬è©¦çš„å¯¦ä½œæŠ€å·§

## ğŸ“ å­¸ç¿’åƒ¹å€¼

é€™å€‹å¯¦ä½œç‚º Java å­¸ç¿’è€…æä¾›äº†ä»¥ä¸‹åƒ¹å€¼ï¼š

### è¨­è¨ˆæ¨¡å¼å¯¦å‹™
- Observer æ¨¡å¼çš„å®Œæ•´å¯¦ä½œ
- å¤šç¨®è¨­è¨ˆæ¨¡å¼çš„çµ„åˆé‹ç”¨
- ç¾å¯¦ä¸–ç•Œçš„è¨­è¨ˆæ¨¡å¼æ‡‰ç”¨

### ä½µç™¼ç¨‹å¼è¨­è¨ˆ
- åŸ·è¡Œç·’å®‰å…¨çš„ç¨‹å¼è¨­è¨ˆæŠ€å·§
- ç•°æ­¥ç¨‹å¼è¨­è¨ˆçš„æœ€ä½³å¯¦å‹™
- CompletableFuture çš„æ·±åº¦é‹ç”¨

### ä¼æ¥­ç´šé–‹ç™¼
- åˆ†å±¤æ¶æ§‹çš„å¯¦éš›æ‡‰ç”¨
- Spring æ¡†æ¶çš„æ•´åˆé‹ç”¨
- ç”Ÿç”¢å°±ç·’çš„ç¨‹å¼ç¢¼å“è³ª

### æ¸¬è©¦å·¥ç¨‹
- TDD çš„å®Œæ•´å¯¦å‹™æµç¨‹
- å„ç¨®æ¸¬è©¦é¡å‹çš„å¯¦ä½œ
- Mock å’Œæ•´åˆæ¸¬è©¦æŠ€å·§

---

**ç¸½çµ**: UC-009 TaskReminderUseCase çš„å¯¦ä½œæˆåŠŸå±•ç¤ºäº† Observer è¨­è¨ˆæ¨¡å¼åœ¨ç¾å¯¦å°ˆæ¡ˆä¸­çš„æ‡‰ç”¨ï¼Œçµåˆç¾ä»£ Java æŠ€è¡“æ£§ï¼Œå‰µé€ äº†ä¸€å€‹åŠŸèƒ½å®Œæ•´ã€æ¶æ§‹å„ªé›…ã€å¯ç¶­è­·æ€§é«˜çš„ä¼æ¥­ç´šè§£æ±ºæ–¹æ¡ˆã€‚é€™å€‹å¯¦ä½œä¸åƒ…æ˜¯è¨­è¨ˆæ¨¡å¼çš„ç¯„ä¾‹ï¼Œæ›´æ˜¯ç¾ä»£è»Ÿé«”å·¥ç¨‹å¯¦å‹™çš„å®Œæ•´å±•ç¤ºã€‚